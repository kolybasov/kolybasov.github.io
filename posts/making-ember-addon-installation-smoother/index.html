<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Making Ember Addon Installation Smoother - Mykola Basov&#39;s Blog</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href='https://kolybasov.github.io/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='https://kolybasov.github.io/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='https://kolybasov.github.io/favicons/favicon-16x16.png'>
<link rel="manifest" href='https://kolybasov.github.io/favicons/site.webmanifest'>
<link rel="mask-icon" href='https://kolybasov.github.io/favicons/safari-pinned-tab.svg' color="#5bbad5">
<link rel="shortcut icon" href='https://kolybasov.github.io/favicons/favicon.ico'>
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="msapplication-config" content='https://kolybasov.github.io/favicons/browserconfig.xml'>
<meta name="theme-color" content="#ffffff">

    
    
<meta itemprop="name" content="Making Ember Addon Installation Smoother">
<meta itemprop="description" content="Ember addon ecosystem is famous because of ember install &lt;addon-name&gt; and it just works. It is convenient for addons users and ember-cli API provides a bunch of methods for addons developers to make this process as smooth as possible.

Do you need to add postcss package to app dependencies? Easy! Just use this.addPackageToProject(&#39;postcss&#39;) method in your addon default blueprint.

Or maybe you need to create postcss.config.js file? Easy! Add it to files directory in your addon default blueprint.

Sounds like ember-cli has all you need to make your addon usage for end users just one terminal command. But imagine you are developing an addon for integrating with third-party service(let’s say google maps) and you are 100% sure your users will need to add API key to their environment.js config to make your addon actually do something. And it turns you have limited choices:


override entire environment.js file with your keys;
remind a user to add this keys manually.


Sounds not really ember-ish right? “But there is an addon for this!”

">


<meta itemprop="datePublished" content="2018-03-19T22:40:58&#43;02:00" />
<meta itemprop="dateModified" content="2018-03-19T22:40:58&#43;02:00" />
<meta itemprop="wordCount" content="1588">



<meta itemprop="keywords" content="programming,oss,javascript,ember," />

    
    <meta property="og:title" content="Making Ember Addon Installation Smoother" />
<meta property="og:description" content="Ember addon ecosystem is famous because of ember install &lt;addon-name&gt; and it just works. It is convenient for addons users and ember-cli API provides a bunch of methods for addons developers to make this process as smooth as possible.

Do you need to add postcss package to app dependencies? Easy! Just use this.addPackageToProject(&#39;postcss&#39;) method in your addon default blueprint.

Or maybe you need to create postcss.config.js file? Easy! Add it to files directory in your addon default blueprint.

Sounds like ember-cli has all you need to make your addon usage for end users just one terminal command. But imagine you are developing an addon for integrating with third-party service(let’s say google maps) and you are 100% sure your users will need to add API key to their environment.js config to make your addon actually do something. And it turns you have limited choices:


override entire environment.js file with your keys;
remind a user to add this keys manually.


Sounds not really ember-ish right? “But there is an addon for this!”

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kolybasov.github.io/posts/making-ember-addon-installation-smoother/" />



<meta property="article:published_time" content="2018-03-19T22:40:58&#43;02:00"/>

<meta property="article:modified_time" content="2018-03-20T12:42:19&#43;02:00"/>











    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Making Ember Addon Installation Smoother"/>
<meta name="twitter:description" content="Ember addon ecosystem is famous because of ember install &lt;addon-name&gt; and it just works. It is convenient for addons users and ember-cli API provides a bunch of methods for addons developers to make this process as smooth as possible.

Do you need to add postcss package to app dependencies? Easy! Just use this.addPackageToProject(&#39;postcss&#39;) method in your addon default blueprint.

Or maybe you need to create postcss.config.js file? Easy! Add it to files directory in your addon default blueprint.

Sounds like ember-cli has all you need to make your addon usage for end users just one terminal command. But imagine you are developing an addon for integrating with third-party service(let’s say google maps) and you are 100% sure your users will need to add API key to their environment.js config to make your addon actually do something. And it turns you have limited choices:


override entire environment.js file with your keys;
remind a user to add this keys manually.


Sounds not really ember-ish right? “But there is an addon for this!”

"/>

    
    <link rel="stylesheet" href='https://kolybasov.github.io/assets/app.css'>
  </head>

  <body>
      <header class="header">
  <div class="container header__container">
    <a href="https://kolybasov.github.io" class="header__logo-link">
      <img src='https://kolybasov.github.io/images/logo.svg' alt="logo" class="header__logo-img">
    </a>

    <nav class="header__nav">
      <a class="header__nav-link" href='https://kolybasov.github.io/posts'>
        Posts
      </a>

      <a class="header__nav-link" href='https://kolybasov.github.io/about'>
        About
      </a>
    </nav>
  </div>
</header>


      <div class="container">
        <main class="main">
  <h1 class="main__content-heading">Making Ember Addon Installation Smoother</h1>

  

  <div class="main__content">
    <p>Ember addon ecosystem is famous because of <code>ember install &lt;addon-name&gt;</code> and it just works. It is convenient for addons users and ember-cli API provides a bunch of methods for addons developers to make this process as smooth as possible.</p>

<p>Do you need to add <code>postcss</code> package to app dependencies? Easy! Just use <code>this.addPackageToProject('postcss')</code> method in your addon <a href="https://ember-cli.com/extending/#default-blueprint" target="_blank">default blueprint</a>.</p>

<p>Or maybe you need to create <code>postcss.config.js</code> file? Easy! Add it to files directory in your addon default blueprint.</p>

<p>Sounds like ember-cli has all you need to make your addon usage for end users just one terminal command. But imagine you are developing an addon for integrating with third-party service(let’s say google maps) and you are 100% sure your users will need to add API key to their <code>environment.js</code> config to make your addon actually do something. And it turns you have limited choices:</p>

<ul>
<li>override entire environment.js file with your keys;</li>
<li>remind a user to add this keys manually.</li>
</ul>

<p>Sounds not really ember-ish right? “But there is an addon for this!”</p>

<p></p>

<h2 id="so-what-is-my-other-option">So what is my other option?</h2>

<p><a href="https://github.com/kolybasov/ember-cli-config-builder" target="_blank">ember-cli-config-builder</a> addon was created just to fill this gap and make your users happy!</p>

<p>It is ember-addon itself so type <code>npm install --save ember-cli-config-builder</code> and you are ready to go! As you may remember we are building <code>ember-google-maps</code> addon and we need to add it’s config to user’s environment. To do this follow next steps:</p>

<h3 id="create-blueprint-ember-google-maps-index-js-file">Create <code>blueprint/ember-google-maps/index.js</code> file.</h3>

<p>It will be our default addon blueprint which ember-cli automatically runs when a user uses <code>ember install</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ember-google-maps&#39;</span><span class="p">,</span>
  <span class="nx">afterInstall</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// place where we will add our logic
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="next-step-is-to-import-ember-cli-config-builder-addon-and-allow-it-to-do-its-work">Next step is to import <code>ember-cli-config-builder</code> addon and allow it to do its work.</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// …
</span><span class="c1"></span><span class="k">const</span> <span class="nx">ConfigBuilder</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ember-cli-config-builder&#39;</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// …
</span><span class="c1"></span>  <span class="c1">// afterInstall hook supports returning Promise
</span><span class="c1"></span>  <span class="c1">// and we will use async/await syntax for clearer code
</span><span class="c1"></span>  <span class="c1">// you probably should use `then` syntax yet because async/await
</span><span class="c1"></span>  <span class="c1">// is supported only in Node 8+
</span><span class="c1"></span>  <span class="kr">async</span> <span class="nx">afterInstall</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this.project.configPath() is ember-cli method to get path to
</span><span class="c1"></span>    <span class="c1">// environment.js file
</span><span class="c1"></span>    <span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">ConfigBuilder</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">project</span><span class="p">.</span><span class="nx">configPath</span><span class="p">());</span>
    <span class="c1">// ask user to enter API key
</span><span class="c1"></span>    <span class="kd">let</span> <span class="p">{</span> <span class="nx">apiKey</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">prompt</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Please past your Google Maps API key to add it to your config:&#39;</span><span class="p">,</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;apiKey&#39;</span>
      <span class="p">}</span>
    <span class="p">]);</span>
    <span class="c1">// there we set `ember-google-maps` key in ENV object to
</span><span class="c1"></span>    <span class="c1">// object with a single key `apiKey` and value `placeholder`
</span><span class="c1"></span>    <span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;ember-google-maps&#39;</span><span class="p">,</span> <span class="sb">`{ apiKey: &#39;</span><span class="si">${</span><span class="nx">apiKey</span><span class="si">}</span><span class="sb">&#39; }`</span><span class="p">);</span>
    <span class="c1">// writing changes to file
</span><span class="c1"></span>    <span class="kr">await</span> <span class="nx">config</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="c1">// notifying user about changed file
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">writeInfoLine</span><span class="p">(</span>
      <span class="s1">&#39;You apps config has been updated to include Google Maps API key param.&#39;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="done">Done!</h3>

<p>Now user&rsquo;s config will look like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// …
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">ENV</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// …
</span><span class="c1"></span>  <span class="s1">&#39;ember-google-maps&#39;</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">apiKey</span><span class="o">:</span> <span class="s1">&#39;user entered API key&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// …
</span><span class="c1"></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="wait-why-there-are-this-promises-and-weird-strings-instead-of-js-values">Wait why there are this promises and weird strings instead of JS values?</h2>

<h3 id="let-s-talk-about-promises-first">Let’s talk about promises first.</h3>

<p><code>ember-cli-config-builder</code> uses node’s <code>fs.readFile()/fs.writeFile()</code> methods which are asynchronous. However, there is synchronous alternative and the primary target is addon blueprints which do not mind if the thread will be blocked while reading file asynchronous method was chosen to not limit addon usage and you can use it even if your code is critical to blocking threads. Also, ember-cli hooks support Promise return so this should not be a problem especially when async/await syntax will be widely used. There are only two asynchronous methods <code>ConfigBuilder.create()</code> and <code>configBuilderInstance.save()</code>, all other methods are synchronous.</p>

<h3 id="regarding-strings">Regarding strings.</h3>

<p>Remember that we are editing JavaScript source code not just plain object and to make it more clear and reliable you need to pass a string with your value instead of regular value. It is possible to pass regular values but this method is not reliable and not recommended. Passing strings helps to avoid unneeded evaluation and guarantees that you will get the same result as you supplied. There are a few examples how to pass values:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// String value: notice surrounding double quotes
</span><span class="c1"></span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;locationType&#39;</span><span class="p">,</span> <span class="s2">&#34;&#39;history&#39;&#34;</span><span class="p">);</span>

<span class="c1">// Object value: you can use ES2015 template literals for multiline values
</span><span class="c1"></span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span>
  <span class="s1">&#39;ember-google-maps&#39;</span><span class="p">,</span>
  <span class="sb">`{
</span><span class="sb">  apiKey: &#39;</span><span class="si">${</span><span class="nx">apiKey</span><span class="si">}</span><span class="sb">&#39;
</span><span class="sb">}`</span>
<span class="p">);</span>

<span class="c1">// Numbers/boolean
</span><span class="c1"></span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="s1">&#39;5000&#39;</span><span class="p">);</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;useDefault&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div>
<h2 id="any-usage-advices">Any usage advices?</h2>

<p>Sure! There are few important questions you need to answer before editing users files(especially inside of default blueprint).</p>

<h3 id="do-you-absolutely-need-this-value-to-be-inside-of-user-config">Do you absolutely need this value to be inside of user config?</h3>

<p>Your addon may contain a lot of options and you want to give users ability to specify them all. But maybe it is better to have a fallback(default value) for them. It is always better to have as many sensible defaults as possible but with an ability to change them when needed.
Example: our <code>ember-google-maps</code> addon may have option <code>disableDefaultUI</code>. It’s ok to assume it is on by default and allow a user to opt out. Pseudocode: <code>let disableDefaultUI = getWithDefault(config, 'disableDefaultUI', true);</code> which means if this value is present in user config then it will be used and <code>true</code> otherwise.</p>

<h3 id="do-you-need-to-update-ember-cli-built-in-config-value">Do you need to update ember-cli built-in config value?</h3>

<p>So maybe you want to change some Ember value let’s say <code>rootURL</code>. It is possible too! But wait are you sure this won’t break build? Of course you are not and eventually, it will break someones build! To avoid this remember few rules:</p>

<ul>
<li>It <strong>IS OK</strong> to change this values when user type them so you are moving responsibility and make a user aware of changes.</li>
<li>It <strong>IS OK</strong> to change this values inside of non-default blueprint which user will run manually. But always remember to notify the user what you changed and where!</li>
<li>It <strong>IS NOT OK</strong> to change this values automatically inside of default blueprint. Especially silently without any warnings.</li>
</ul>

<h3 id="is-this-value-safe-to-place-inside-of-config-files">Is this value safe to place inside of config files?</h3>

<p>Some kind of values are sensitive to place them in public files. Like secret API keys, user credentials etc. However, most of the keys are made to use on the client side(Ember still front-end framework) please be careful with this kind of values because they may be accidentally committed to public repositories.</p>

<h2 id="does-this-addon-have-other-features">Does this addon have other features?</h2>

<p>Yes! Above was the simplest case just to show how easy is to edit ember config files but you can do much more with it.</p>

<h3 id="adapters">Adapters</h3>

<p>This addon uses adapters to provide the default set of methods <code>get/set/remove</code> for different files. An adapter is automagically chosen by file’s name but can be specified when builder instance is created. Now there are 2 built-in adapters which allow you to edit <code>environment.js</code> and <code>ember-cli-build.js</code> files. But you can implement your own adapter by extending <code>BaseAdapter</code> class and implementing a base set of methods(it is not required but if you do so you will get <code>getProperties/setProperties/removeProperties/save</code> methods for free) and registering it with <code>ConfigBuilder.registerAdapter()</code> method.</p>

<h3 id="paths">Paths</h3>

<p>When passing key you can use dot-separated nested path(just like in Ember). This allows you to get/set/remove nested keys from objects. Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;ember-google-maps.apiKey&#39;</span><span class="p">);</span> <span class="c1">// &#34;&#39;your API key&#39;&#34;
</span><span class="c1"></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="environment-adapter">Environment Adapter</h3>

<p>When you are passing <code>./path/to/environment.js</code> path to <code>ConfigBuilder.create()</code> Environment Adapter instance is created and you are ready to edit values on default ENV object. If you need to set environment specific values you can get(or create if not exists) environment block which looks like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">environment</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// You config there
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>To do this use <code>config.env()</code> method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// is present id default app blueprint
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">productionConfig</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">env</span><span class="p">(</span><span class="s1">&#39;production&#39;</span><span class="p">);</span>
<span class="c1">// does not exist by default so in most cases it will be created
</span><span class="c1"></span><span class="kd">let</span> <span class="nx">stagingConfig</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">env</span><span class="p">(</span><span class="s1">&#39;staging&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div>
<p>When you set some value in environment block result will be similar to this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">environment</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">ENV</span><span class="p">[</span><span class="s1">&#39;ember-google-maps&#39;</span><span class="p">].</span><span class="nx">apiKey</span> <span class="o">=</span> <span class="s1">&#39;you prod API key&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="ember-cli-build-adapter">Ember-Cli-Build Adapter</h3>

<p>This adapter is used when you need to edit <code>ember-cli-build.js</code> file. It has the same default set of methods as environment adapter(except <code>env</code>) and allows you to add or remove imports of assets with <code>addImport/removeImport</code> methods.
You can use it like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">buildConfig</span><span class="p">.</span><span class="nx">addImport</span><span class="p">(</span><span class="s1">&#39;node_modules/moment/dist/moment.min.js&#39;</span><span class="p">);</span>
<span class="c1">// Will produce
</span><span class="c1">// …
</span><span class="c1"></span><span class="nx">app</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="s1">&#39;node_modules/moment/dist/moment.min.js&#39;</span><span class="p">);</span>
<span class="c1">// …
</span><span class="c1"></span><span class="k">return</span> <span class="nx">app</span><span class="p">.</span><span class="nx">toTree</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="saving-edited-configs">Saving edited configs</h3>

<p>In case you need to save config into a new file and keep original one unchanged you can provide a path to this file into save method.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">config</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s1">&#39;./path/to/my/new/environment.js&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div>
<h2 id="is-there-any-alternatives-to-this-addon">Is there any alternatives to this addon?</h2>

<p>Yep! And this addon was built to replace them but I will share so you can compare by yourself!</p>

<p><a href="https://github.com/srvance/ember-cli-build-config-editor" target="_blank">srvance/ember-cli-build-config-editor</a> – uses the same approach with recast AST trees but is have many limits what you can edit and uses it owns non-Ember intuitive API. Also, it moves reading and writing files to user responsibilities.</p>

<p><a href="https://github.com/benjamn/recast" target="_blank">benjamn/recast</a> – very powerful but yet very low-level tool to parse, edit and print JavaScript files. <code>ember-cli-config-builder</code> wraps it to make editing much easier.</p>

<h2 id="conclusion">Conclusion</h2>

<p><code>ember-cli-config-builder</code> goal is to provide familiar to Ember developers way to edit config files programmatically. And it is designed to work with default ember-cli generated files. If you have any issues or suggestions please post it to <a href="https://github.com/kolybasov/ember-cli-config-builder" target="_blank">issues</a> It is a young library and any feedback and testing on edge-cases is appreciated. Also if you like it give it your <a href="https://github.com/kolybasov/ember-cli-config-builder" target="_blank">star</a>!</p>
  </div>

  
  <div class="main__post-content-notice">
    <span>If you have any comments or suggestions please post it at&nbsp;
    <a href='https://github.com/kolybasov/kolybasov.github.io/issues/1'>
      GitHub
    </a>.</span>
  </div>
  
</main>

        
        
      </div>
    
    <script src='https://kolybasov.github.io/assets/app.js' async></script>
  </body>
</html>
